<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Non-Violent Communication</title>
    <style>
        /* --- CSS STYLES --- */
        :root {
            --bg-color: #0f0f0f;
            --text-muted: #757575;
            --text-bright: #eeeeee;
            --highlight: #FFD700; /* Gold */
            --accent: #333;
        }

        * {
            box-sizing: border-box;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden; /* No scrollbars */
            color: var(--text-bright);
        }

        /* Main Container: Flex column to manage the three zones */
        #app {
            height: 100vh;
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            padding: 20px;
            position: relative;
        }

        /* --- THE THREE ZONES --- */
        
        /* 1. TOP ZONE: The "Pre-Text" */
        /* Aligns text to the bottom so it sits right on top of the phrase */
        #zone-top {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            text-align: center;
            padding-bottom: 20px;
            
            font-size: clamp(1.1rem, 2.5vw, 1.5rem);
            color: var(--text-muted);
            font-weight: 300;
            line-height: 1.4;
            transition: opacity 0.4s ease;
        }

        /* 2. MIDDLE ZONE: The "Phrase" (ANCHOR) */
        /* Fixed height. Keeps the phrase exactly in the center vertically */
        #zone-center {
            height: 120px; /* Fixed anchor height */
            flex-shrink: 0; /* Never shrink */
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }
        
        /* The Highlighted Phrase Styling */
        #phrase-display {
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 800;
            color: var(--highlight);
            text-transform: lowercase; /* Optional stylistic choice, remove if unwanted */
            letter-spacing: -0.5px;
            text-shadow: 0 4px 20px rgba(255, 215, 0, 0.15);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Context Label (Small tag above the phrase) */
        #context-tag {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #444;
            background: #1a1a1a;
            padding: 4px 12px;
            border-radius: 20px;
            white-space: nowrap;
        }

        /* 3. BOTTOM ZONE: The "Post-Text" */
        /* Aligns text to the top so it hangs right below the phrase */
        #zone-bottom {
            flex: 1;
            display: flex;
            justify-content: flex-start; /* Aligns content to top */
            align-items: center; /* Horizontally center */
            flex-direction: column;
            text-align: center;
            padding-top: 20px;
            
            font-size: clamp(1.1rem, 2.5vw, 1.5rem);
            color: var(--text-muted);
            font-weight: 300;
            line-height: 1.4;
            transition: opacity 0.4s ease;
        }

        /* --- UTILS --- */
        .fade-out {
            opacity: 0;
            transform: translateY(10px);
        }

        /* Instructions Overlay */
        #instructions {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.85rem;
            color: #444;
            pointer-events: none;
            opacity: 0.6;
        }

        /* Progress Bar */
        #progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 4px;
            background: var(--highlight);
            width: 0%;
            transition: width 0.3s ease;
        }

    </style>
</head>
<body>

    <div id="progress"></div>

    <div id="app">
        <!-- Zone 1: Prefix -->
        <div id="zone-top">
            <span id="text-prefix"></span>
        </div>

        <!-- Zone 2: The Anchor Phrase -->
        <div id="zone-center">
            <div id="context-tag">Context</div>
            <div id="phrase-display">Phrase</div>
        </div>

        <!-- Zone 3: Suffix -->
        <div id="zone-bottom">
            <span id="text-suffix"></span>
        </div>
        
        <div id="instructions">Scroll / Swipe</div>
    </div>

    <script>
        /* --- JAVASCRIPT LOGIC --- */

        // 1. DATA PREPARATION
        // I have cleaned the phrases to remove the curly braces for splitting purposes
        const data = [
             // {The thing is..}
            { phrase: "The thing is..", context: "Group Differences", text: "I see the results for the teenagers. The thing is.. we didn't test any adults, so we can't say this works for everyone." },
            { phrase: "The thing is..", context: "Tools", text: "The scale is easy to use. The thing is.. it isn't sensitive enough to measure the very small changes we are looking for." },
            { phrase: "The thing is..", context: "Dropouts", text: "The final numbers look good. The thing is.. half the people quit the study early, so the data might be one-sided." },
            { phrase: "The thing is..", context: "Timing", text: "I know we want to finish today. The thing is.. the plants need three more days to grow before we can measure them." },
            { phrase: "The thing is..", context: "Rules", text: "The report is ready. The thing is.. the school board has a special format we have to follow for our writing." },
            
            // {Can we make an adjustment..}
            { phrase: "Can we make an adjustment..", context: "Questions", text: "The interview plan is good. Can we make an adjustment.. to the first question so it doesn't sound like we are nudging them to say 'yes'?" },
            { phrase: "Can we make an adjustment..", context: "Group Size", text: "The first test worked well. Can we make an adjustment.. and add 20 more people to the group to be extra sure of the result?" },
            { phrase: "Can we make an adjustment..", context: "Math Choice", text: "I see you used a simple average. Can we make an adjustment.. and look at the middle number instead, since those two high scores are an accident?" },
            { phrase: "Can we make an adjustment..", context: "Safety", text: "The lab is set up. Can we make an adjustment.. and wear double gloves for this part of the test just to be safe?" },
            { phrase: "Can we make an adjustment..", context: "Writing", text: "I read the draft. Can we make an adjustment.. to the ending to be more honest about what we still don't know?" },

            // {I don't share the same sentiment..}
            { phrase: "I don't share the same sentiment..", context: "The Guess", text: "You think the medicine caused the change. I don't share the same sentiment.. because the change happened before they took the pill." },
            { phrase: "I don't share the same sentiment..", context: "Patterns", text: "You see a clear pattern here. I don't share the same sentiment..; to me, it looks like the dots are just scattered randomly." },
            { phrase: "I don't share the same sentiment..", context: "Importance", text: "You think this is a huge discovery. I don't share the same sentiment.. yet; I think we need to do the test one more time to be sure." },
            { phrase: "I don't share the same sentiment..", context: "Team Goal", text: "The group wants to focus on computers. I don't share the same sentiment.. because I think talking to people face-to-face gives better info." },
            { phrase: "I don't share the same sentiment..", context: "Partners", text: "You think this other lab is great to work with. I don't share the same sentiment.. because they were very slow to share their notes last time." },

            // {My possible concern with that is..}
            { phrase: "My possible concern with that is..", context: "Picking People", text: "Testing only our friends is fast. My possible concern with that is.. that they might just tell us what they think we want to hear." },
            { phrase: "My possible concern with that is..", context: "Heat/Cold", text: "Keeping the samples on the desk is fine for now. My possible concern with that is.. they might spoil if the room gets too warm at night." },
            { phrase: "My possible concern with that is..", context: "Privacy", text: "We took the names off the papers. My possible concern with that is.. that someone could still guess who the people are by their birthdays." },
            { phrase: "My possible concern with that is..", context: "Real Life", text: "The test worked perfectly in the quiet lab. My possible concern with that is.. it might not work at all in a noisy, busy house." },
            { phrase: "My possible concern with that is..", context: "Apps", text: "This new app is fast for tracking. My possible concern with that is.. it crashes a lot on older phones." },

            // {I feel the other way around..}
            { phrase: "I feel the other way around..", context: "What Caused It", text: "You think being tired makes people sad. I feel the other way around..—I think being sad is what is keeping them from sleeping." },
            { phrase: "I feel the other way around..", context: "Mistakes", text: "You think that high number is a mistake. I feel the other way around..; I think that is the most important part of the whole test." },
            { phrase: "I feel the other way around..", context: "Money", text: "You want to buy new tools. I feel the other way around..—I think we should spend the money on better books and sources." },
            { phrase: "I feel the other way around..", context: "Ideas", text: "You are looking at this like a science problem. I feel the other way around..—I think it is actually a problem with how people behave." },
            { phrase: "I feel the other way around..", context: "Sharing", text: "You think we should show the results now. I feel the other way around..—I think we should wait until we check the math again." },

            // {I appreciate the idea..}
            { phrase: "I appreciate the idea..", context: "The Plan", text: "I appreciate the idea.. of testing 100 people at once, but I’m worried we don't have enough chairs for everyone." },
            { phrase: "I appreciate the idea..", context: "Pictures", text: "I appreciate the idea.. of using a colorful chart, but a simple list might be easier for the boss to read quickly." },
            { phrase: "I appreciate the idea..", context: "New Help", text: "I appreciate the idea.. of asking the history teacher for help, but let's make sure we explain our science goals to them first." },
            { phrase: "I appreciate the idea..", context: "Words", text: "I appreciate the idea.. of using big words to sound smart, but using simple words will help more people understand our work." },
            { phrase: "I appreciate the idea..", context: "Meetings", text: "I appreciate the idea.. of meeting every morning, but maybe once a week is enough so we have time to actually do the work." }
        ];

        // 2. STATE & DOM ELEMENTS
        let currentIndex = 0;
        let isLocked = false; // Prevents rapid scrolling

        const elPrefix = document.getElementById('text-prefix');
        const elPhrase = document.getElementById('phrase-display');
        const elSuffix = document.getElementById('text-suffix');
        const elContext = document.getElementById('context-tag');
        const elProgress = document.getElementById('progress');
        
        const zoneTop = document.getElementById('zone-top');
        const zoneBottom = document.getElementById('zone-bottom');

        // 3. RENDER LOGIC
        function render(index) {
            const item = data[index];

            // Update Progress Bar
            const percent = ((index + 1) / data.length) * 100;
            elProgress.style.width = `${percent}%`;

            // Split text around the phrase
            // We use .split() to separate the sentence into [Prefix, Suffix]
            // We assume the phrase appears exactly once in the text.
            const parts = item.text.split(item.phrase);
            const prefix = parts[0] || "";
            const suffix = parts[1] || "";

            // Visual Fade Out
            zoneTop.style.opacity = 0;
            zoneBottom.style.opacity = 0;
            elPhrase.style.transform = "scale(0.9)";

            setTimeout(() => {
                // Update Content
                elContext.textContent = item.context;
                elPrefix.textContent = prefix.trim();
                elPhrase.textContent = item.phrase; // The anchor
                elSuffix.textContent = suffix.trim();

                // Visual Fade In
                zoneTop.style.opacity = 1;
                zoneBottom.style.opacity = 1;
                elPhrase.style.transform = "scale(1)";
            }, 200);
        }

        // 4. NAVIGATION CONTROLLER
        function navigate(direction) {
            // DIRECTION: 1 for next, -1 for prev
            if (isLocked) return; // Ignore input if locked

            if (direction === 1) {
                if (currentIndex < data.length - 1) {
                    currentIndex++;
                    triggerLock();
                    render(currentIndex);
                }
            } else {
                if (currentIndex > 0) {
                    currentIndex--;
                    triggerLock();
                    render(currentIndex);
                }
            }
        }

        // 5. LOCKING MECHANISM (UX fix for "Two changes in one scroll")
        function triggerLock() {
            isLocked = true;
            // Lock interaction for 1200ms (1.2 seconds) to prevent momentum scrolling skipping slides
            setTimeout(() => {
                isLocked = false;
            }, 1200);
        }

        // 6. INPUT HANDLERS

        // A. Mouse Wheel
        window.addEventListener('wheel', (e) => {
            if (isLocked) return;
            // Threshold ensures tiny accidental movements don't trigger
            if (Math.abs(e.deltaY) > 20) {
                if (e.deltaY > 0) navigate(1);
                else navigate(-1);
            }
        });

        // B. Touch Swipe
        let touchStartY = 0;
        let touchEndY = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartY = e.changedTouches[0].screenY;
        }, false);

        document.addEventListener('touchend', (e) => {
            if (isLocked) return;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, false);

        function handleSwipe() {
            const yDiff = touchStartY - touchEndY;
            // Threshold of 40px to count as a swipe
            if (Math.abs(yDiff) > 40) {
                if (yDiff > 0) navigate(1); // Swipe Up -> Next
                else navigate(-1); // Swipe Down -> Prev
            }
        }

        // C. Keyboard
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') navigate(1);
            if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') navigate(-1);
        });

        // Initialize
        render(currentIndex);

    </script>
</body>
</html>
